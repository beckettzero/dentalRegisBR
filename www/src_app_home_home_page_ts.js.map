{"version":3,"file":"src_app_home_home_page_ts.js","mappings":"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","sources":["./src/app/home/home.page.ts","./src/app/home/home.page.html"],"sourcesContent":["import { Component, OnInit, HostListener } from '@angular/core';\nimport { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule, ToastController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule, IonicModule]\n})\nexport class HomePage implements OnInit {\n  loginForm: FormGroup;\n  inactivityTimer: any;\n  showToast: any;\n  toastMessage: any;\n  toastColor: any;\n\n  constructor(private fb: FormBuilder, private router: Router, private http: HttpClient) {\n    this.loginForm = this.fb.group({\n      username: ['', Validators.required],\n      password: ['', Validators.required],\n    });\n  }\n\n  ngOnInit() {\n    this.resetInactivityTimer();\n    this.setupInactivityListeners();\n  }\n\n  // Manejadores para diferentes eventos de interacción\n  @HostListener('window:mousemove') onMouseMove() {\n    this.resetInactivityTimer();\n  }\n\n  @HostListener('window:touchstart') onTouchStart() {\n    this.resetInactivityTimer();\n  }\n\n  @HostListener('window:keydown') onKeyDown() {\n    this.resetInactivityTimer();\n  }\n\n  @HostListener('window:click') onClick() {\n    this.resetInactivityTimer();\n  }\n\n  onSubmit() {\n    if (this.loginForm.valid) {\n      const username = this.loginForm.get('username')!.value;\n      const password = this.loginForm.get('password')!.value;\n  \n      this.http.post<any>('https://www.dentalregisbr.000.pe/loginDB.php', { username, password }).subscribe(response => {\n        if (response.status === 'success') {\n          // Aquí asumo que `response.usuario_id` es el ID del usuario que viene desde el backend.\n          localStorage.setItem('isLoggedIn', 'true');\n          localStorage.setItem('usuario_id', response.usuario_id); // Guarda el usuario_id en localStorage\n          this.router.navigate(['/menu1']);\n          this.resetInactivityTimer();\n        } else {\n          alert('Invalid credentials');\n        }\n      });\n    }\n  }\n  \n  resetInactivityTimer() {\n    if (this.inactivityTimer) {\n      clearTimeout(this.inactivityTimer);\n    }\n\n    this.inactivityTimer = setTimeout(() => {\n      this.logout();\n    }, 10000); // 10 segundos\n  }\n\n  logout() {\n    localStorage.removeItem('isLoggedIn');\n    this.router.navigate(['/']);\n    alert('Session expired due to inactivity.');\n  }\n\n  setupInactivityListeners() {\n    // Se asegura de que se reinicie el timer para cualquier interacción\n    this.onMouseMove();\n    this.onTouchStart();\n    this.onKeyDown();\n    this.onClick();\n  }\n}\n","<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-title class=\"ion-text-center\">Inicio de Sesión</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\" class=\"ion-padding\">\n  <ion-header collapse=\"condense\">\n    <ion-toolbar>\n      <ion-title size=\"large\" class=\"ion-text-center\">Inicio de Sesión</ion-title>\n    </ion-toolbar>\n  </ion-header>\n\n  <div id=\"login-container\" class=\"ion-margin-top ion-padding\">\n    <ion-card class=\"ion-text-center\">\n      <ion-card-header>\n        <ion-card-title class=\"ion-text-uppercase\">Bienvenido</ion-card-title>\n        <ion-card-subtitle>Accede a tu cuenta</ion-card-subtitle>\n      </ion-card-header>\n\n      <ion-card-content>\n        <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\n\n          <ion-label >Nombre de usuario</ion-label>\n\n\n          <ion-item lines=\"none\" class=\"ion-margin-bottom\">\n          \n            <ion-input formControlName=\"username\" type=\"text\" class=\"outlined-label\" clear-input></ion-input>\n          </ion-item>\n\n          <ion-label >Contraseña</ion-label>\n          <ion-item lines=\"none\" class=\"ion-margin-bottom\">\n          \n            <ion-input formControlName=\"password\" type=\"password\" class=\"outlined-label\" clear-input></ion-input>\n          </ion-item>\n          <ion-button expand=\"block\" type=\"submit\" [disabled]=\"!loginForm.valid\" color=\"primary\">Iniciar Sesión</ion-button>\n        </form>\n      </ion-card-content>\n    </ion-card>\n  </div>\n   \n  <div>\n\n    <ion-button expand=\"block\" fill=\"clear\" color=\"secondary\" routerLink=\"/register\">¿No tienes cuenta? Regístrate</ion-button>\n\n  </div>\n\n</ion-content>\n"],"names":["ReactiveFormsModule","Validators","CommonModule","IonicModule","HomePage","constructor","fb","router","http","loginForm","group","username","required","password","ngOnInit","resetInactivityTimer","setupInactivityListeners","onMouseMove","onTouchStart","onKeyDown","onClick","onSubmit","valid","get","value","post","subscribe","response","status","localStorage","setItem","usuario_id","navigate","alert","inactivityTimer","clearTimeout","setTimeout","logout","removeItem","i0","ɵɵdirectiveInject","i1","FormBuilder","i2","Router","i3","HttpClient","selectors","hostBindings","HomePage_HostBindings","rf","ctx","ɵɵlistener","HomePage_mousemove_HostBindingHandler","ɵɵresolveWindow","HomePage_touchstart_HostBindingHandler","HomePage_keydown_HostBindingHandler","HomePage_click_HostBindingHandler","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","HomePage_Template_form_ngSubmit_17_listener","ɵɵelement","ɵɵproperty","ɵɵadvance","ɵNgNoValidate","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i4","IonButton","IonCard","IonCardContent","IonCardHeader","IonCardSubtitle","IonCardTitle","IonContent","IonHeader","IonInput","IonItem","IonLabel","IonTitle","IonToolbar","TextValueAccessor","RouterLinkDelegate","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}